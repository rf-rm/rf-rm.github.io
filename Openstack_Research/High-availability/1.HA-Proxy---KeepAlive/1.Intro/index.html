



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="rf-rm Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>1.Intro - rf-rm</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.11e41852.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#tim_hieu_ha_proxy_va_keep_alive" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="rf-rm" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                rf-rm
              </span>
              <span class="md-header-nav__topic">
                1.Intro
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="rf-rm" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    rf-rm
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Remove Everything with `rm-rf /`" class="md-nav__link">
      Remove Everything with `rm-rf /`
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Openstack Research
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Openstack Research
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../1. Intro Cloud Computing/" title="Cloud Computing and Openstack" class="md-nav__link">
      Cloud Computing and Openstack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../2.install-pack-stack/" title="2.install pack stack" class="md-nav__link">
      2.install pack stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Advance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-2-4">
        Advance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/1. Key-Rotate-&-Decrypt/" title="Fernet và Rotate trong OPS" class="md-nav__link">
      Fernet và Rotate trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/10. Limit-CPU-Resource/" title="10. Limit CPU Resource" class="md-nav__link">
      10. Limit CPU Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/11. Metadata/" title="11. Metadata" class="md-nav__link">
      11. Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/12. Cloud-init/" title="12. Cloud init" class="md-nav__link">
      12. Cloud init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/13. Cloud-init-Script/" title="13. Cloud init Script" class="md-nav__link">
      13. Cloud init Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/14. QOS - Neutron/" title="14. QOS   Neutron" class="md-nav__link">
      14. QOS   Neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/15. QOS - Cinder/" title="15. QOS   Cinder" class="md-nav__link">
      15. QOS   Cinder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/16. Cinder-Backup-NFS/" title="16. Cinder Backup NFS" class="md-nav__link">
      16. Cinder Backup NFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/17. Transfer-&-Extend-Root-Volume/" title="17. Transfer & Extend Root Volume" class="md-nav__link">
      17. Transfer & Extend Root Volume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/18. L3-Agent-HA-Compute/" title="18. L3 Agent HA Compute" class="md-nav__link">
      18. L3 Agent HA Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/2.RabbitMQ-&-API-Endpoint/" title="2.RabbitMQ & API Endpoint" class="md-nav__link">
      2.RabbitMQ & API Endpoint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/3. Log/" title="3. Log" class="md-nav__link">
      3. Log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/4. Setup-noVNC/" title="noVNC trong OPS" class="md-nav__link">
      noVNC trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/5. Nova-Compute-Serice-&-RabbitMQ/" title="5. Nova Compute Serice & RabbitMQ" class="md-nav__link">
      5. Nova Compute Serice & RabbitMQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/6. Placement-API-&-Nova-Conductor/" title="6. Placement API & Nova Conductor" class="md-nav__link">
      6. Placement API & Nova Conductor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/7.1.  Resource-Management-OPS/" title="Resource Management trong OPS" class="md-nav__link">
      Resource Management trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/7.2 . Nova-Scheduler-&-Host-Aggreaggregate/" title="1. Nova-scheduler" class="md-nav__link">
      1. Nova-scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/7.3. Lab-Filter-Scheduler/" title="7.3. Lab Filter Scheduler" class="md-nav__link">
      7.3. Lab Filter Scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/8. Resize-instance/" title="8. Resize instance" class="md-nav__link">
      8. Resize instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Advance/9. Rescue-instance/" title="1. Nova-rescue" class="md-nav__link">
      1. Nova-rescue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Barbican
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-2-5">
        Barbican
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Barbican/1. Intro-Setup/" title="1. Intro Setup" class="md-nav__link">
      1. Intro Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Barbican/2. Command/" title="2. Command" class="md-nav__link">
      2. Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Cinder
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="7">
      <label class="md-nav__title" for="nav-2-6">
        Cinder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/1. Introduction-cinder/" title="OpenStack Block Storage - Cinder" class="md-nav__link">
      OpenStack Block Storage - Cinder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/2. Cinder-Disk-Work-Flow/" title="2. Cinder Disk Work Flow" class="md-nav__link">
      2. Cinder Disk Work Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/3. Install-Cinder-LVM/" title="3. Install Cinder LVM" class="md-nav__link">
      3. Install Cinder LVM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/4. Basic-Command/" title="4. Basic Command" class="md-nav__link">
      4. Basic Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/5. Install-Multi-Backend/" title="5. Install Multi Backend" class="md-nav__link">
      5. Install Multi Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/6. Filtering-Multi-Backend/" title="6. Filtering Multi Backend" class="md-nav__link">
      6. Filtering Multi Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Cinder/7. Cinder-More/" title="7. Cinder More" class="md-nav__link">
      7. Cinder More
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7">
    
    <label class="md-nav__link" for="nav-2-7">
      Glance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="8">
      <label class="md-nav__title" for="nav-2-7">
        Glance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Glance/1. Introduction-Glance/" title="OPENSTACK IMAGE - GLANCE" class="md-nav__link">
      OPENSTACK IMAGE - GLANCE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Glance/2. Install Glance/" title="Cài đặt Glance - Openstack IMAGE" class="md-nav__link">
      Cài đặt Glance - Openstack IMAGE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Glance/3. Openstack-Glance-&-CURL/" title="Làm việc với Glance" class="md-nav__link">
      Làm việc với Glance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Glance/4. Config/" title="Tìm hiểu cấu hình cơ bản trong Glance" class="md-nav__link">
      Tìm hiểu cấu hình cơ bản trong Glance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Glance/5. Glance-Advanced/" title="5. Glance Advanced" class="md-nav__link">
      5. Glance Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8" type="checkbox" id="nav-2-8" checked>
    
    <label class="md-nav__link" for="nav-2-8">
      High availability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="9">
      <label class="md-nav__title" for="nav-2-8">
        High availability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1. Introduction-HA/" title="1. Introduction HA" class="md-nav__link">
      1. Introduction HA
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8-2" type="checkbox" id="nav-2-8-2" checked>
    
    <label class="md-nav__link" for="nav-2-8-2">
      1.HA Proxy   KeepAlive
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="11">
      <label class="md-nav__title" for="nav-2-8-2">
        1.HA Proxy   KeepAlive
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        1.Intro
      </label>
    
    <a href="./" title="1.Intro" class="md-nav__link md-nav__link--active">
      1.Intro
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tim_hieu_ha_proxy_va_keep_alive" title="Tìm hiểu HA Proxy và Keep Alive" class="md-nav__link">
    Tìm hiểu HA Proxy và Keep Alive
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1_load_balancing_va_cac_khai_niem_lien_quan" title="1. Load Balancing và các khái niệm liên quan" class="md-nav__link">
    1. Load Balancing và các khái niệm liên quan
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_ha_proxy" title="2. HA Proxy" class="md-nav__link">
    2. HA Proxy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21_mo_au_ve_ha_proxy" title="2.1 . Mở đầu về HA Proxy" class="md-nav__link">
    2.1 . Mở đầu về HA Proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22_ha_proxy_lam_uoc_gi_gi" title="2.2 . HA Proxy làm được gì gì ?" class="md-nav__link">
    2.2 . HA Proxy làm được gì gì ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23_ha_proxy_hoat_ong_nhu_the_nao" title="2.3 . HA Proxy hoạt động như thế nào ." class="md-nav__link">
    2.3 . HA Proxy hoạt động như thế nào .
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24_cac_tinh_nang_co_ban" title="2.4 Các tính năng cơ bản" class="md-nav__link">
    2.4 Các tính năng cơ bản
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25_thuat_toan_su_dung_trong_ha_proxy" title="2.5 . Thuật tóan sử dụng trong HA Proxy" class="md-nav__link">
    2.5 . Thuật tóan sử dụng trong HA Proxy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3_keep_alive" title="3. Keep Alive" class="md-nav__link">
    3. Keep Alive
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31_cac_thuat_ngu" title="3.1. Các thuật ngữ" class="md-nav__link">
    3.1. Các thuật ngữ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32_mo_au_ve_keep_alive" title="3.2 Mở đầu về Keep Alive" class="md-nav__link">
    3.2 Mở đầu về Keep Alive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2. Setup-HA-Proxy-&&-KeepAlive/" title="2. Setup HA Proxy && KeepAlive" class="md-nav__link">
      2. Setup HA Proxy && KeepAlive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3.HA-Proxy-OPS/" title="3.HA Proxy OPS" class="md-nav__link">
      3.HA Proxy OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4. HAProxy-HTTP&Config/" title="4. HAProxy HTTP&Config" class="md-nav__link">
      4. HAProxy HTTP&Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5.  HAproxy-ACL/" title="5.  HAproxy ACL" class="md-nav__link">
      5.  HAproxy ACL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8-3" type="checkbox" id="nav-2-8-3">
    
    <label class="md-nav__link" for="nav-2-8-3">
      2. Octavia
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="12">
      <label class="md-nav__title" for="nav-2-8-3">
        2. Octavia
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Octavia/1.Intro+Setup/" title="1.Intro+Setup" class="md-nav__link">
      1.Intro+Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Octavia/2.Use-Octavia/" title="2.Use Octavia" class="md-nav__link">
      2.Use Octavia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Octavia/3. Octavia-Keep-Alived/" title="3. Octavia Keep Alived" class="md-nav__link">
      3. Octavia Keep Alived
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Octavia/4 .VIP-QOS/" title="4 .VIP QOS" class="md-nav__link">
      4 .VIP QOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Octavia/5.Theory-Octavia-L7-Policy/" title="5.Theory Octavia L7 Policy" class="md-nav__link">
      5.Theory Octavia L7 Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2. Octavia/6. LAB-Octavia-L7-Policy/" title="6. LAB Octavia L7 Policy" class="md-nav__link">
      6. LAB Octavia L7 Policy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8-4" type="checkbox" id="nav-2-8-4">
    
    <label class="md-nav__link" for="nav-2-8-4">
      3. Pacemaker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="13">
      <label class="md-nav__title" for="nav-2-8-4">
        3. Pacemaker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../3. Pacemaker/1. Intro-Pacemaker/" title="1. Intro Pacemaker" class="md-nav__link">
      1. Intro Pacemaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3. Pacemaker/2. Install-Pacemaker/" title="2. Install Pacemaker" class="md-nav__link">
      2. Install Pacemaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3. Pacemaker/3. Use-Pacemaker/" title="3. Use Pacemaker" class="md-nav__link">
      3. Use Pacemaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3. Pacemaker/4. Pacemaker-Apache-Active-Passive/" title="4. Pacemaker Apache Active Passive" class="md-nav__link">
      4. Pacemaker Apache Active Passive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../3. Pacemaker/corosync/" title="Corosync" class="md-nav__link">
      Corosync
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-9" type="checkbox" id="nav-2-9">
    
    <label class="md-nav__link" for="nav-2-9">
      Horizon
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="10">
      <label class="md-nav__title" for="nav-2-9">
        Horizon
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Horizon/Introduction-horizon/" title="OpenStack Dashboard - Horizon" class="md-nav__link">
      OpenStack Dashboard - Horizon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-10" type="checkbox" id="nav-2-10">
    
    <label class="md-nav__link" for="nav-2-10">
      Keystone
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="11">
      <label class="md-nav__title" for="nav-2-10">
        Keystone
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/1. Introduction-Keystone/" title="1. Openstack Indentify ( Keystone )" class="md-nav__link">
      1. Openstack Indentify ( Keystone )
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/2.Install-Keystone/" title="Cài đặt và cấu hình Keystone" class="md-nav__link">
      Cài đặt và cấu hình Keystone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/3. Architecture-Keystone( additional )/" title="1. Kiến trúc trong Keystone ( bổ sung )" class="md-nav__link">
      1. Kiến trúc trong Keystone ( bổ sung )
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/4. Config-Keystone/" title="4. Config Keystone" class="md-nav__link">
      4. Config Keystone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/5. Keystone-Openstack-CLI/" title="Làm việc với Keystone qua CLI" class="md-nav__link">
      Làm việc với Keystone qua CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/6. Keystone-CURL/" title="1. Application Credentials" class="md-nav__link">
      1. Application Credentials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Keystone/7. Token-Keystone/" title="Tìm hiểu Token trong Openstack" class="md-nav__link">
      Tìm hiểu Token trong Openstack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-11" type="checkbox" id="nav-2-11">
    
    <label class="md-nav__link" for="nav-2-11">
      Neutron
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="12">
      <label class="md-nav__title" for="nav-2-11">
        Neutron
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/1. Introduction-neutron/" title="Openstack networking - Neutron" class="md-nav__link">
      Openstack networking - Neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/10. OPS-Packet-Provider/" title="10. OPS Packet Provider" class="md-nav__link">
      10. OPS Packet Provider
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/11. VXLAN-Tunnel/" title="11. VXLAN Tunnel" class="md-nav__link">
      11. VXLAN Tunnel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/12. VXLAN-Tunnel-Host-pair-OPS/" title="12. VXLAN Tunnel Host pair OPS" class="md-nav__link">
      12. VXLAN Tunnel Host pair OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/2. Install Neutron Linux Bridge/" title="Cài đặt Neutron  -- Linux Bridge" class="md-nav__link">
      Cài đặt Neutron  -- Linux Bridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/2.1 . OVS-Self-Services/" title="2.1 . OVS Self Services" class="md-nav__link">
      2.1 . OVS Self Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/2.2. OVS Self-Service-&-Provider/" title="2.2. OVS Self Service & Provider" class="md-nav__link">
      2.2. OVS Self Service & Provider
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/3. Neutron-CLI/" title="Làm việc với Neutron" class="md-nav__link">
      Làm việc với Neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/4. Neutron-Namespace-Agent/" title="TÌm hiểu Namepsace , DHCP, Agent trong OPS" class="md-nav__link">
      TÌm hiểu Namepsace , DHCP, Agent trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/5.  Packet-Walkthrough-Linux-Bridge/" title="Neutron Traffic Flow trong Linux Bridge" class="md-nav__link">
      Neutron Traffic Flow trong Linux Bridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/6. Bonding/" title="Tìm hiểu bonding trong Centos" class="md-nav__link">
      Tìm hiểu bonding trong Centos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/7. VXLAN/" title="7. VXLAN" class="md-nav__link">
      7. VXLAN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/8. OpenvSwitch-OPS/" title="Tìm hiểu OVS trong OPS" class="md-nav__link">
      Tìm hiểu OVS trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Neutron/9. OPS-Packet-Self-Service/" title="Tìm hiểu flow packet khi sử dụng OpenvSwitch trong Openstack" class="md-nav__link">
      Tìm hiểu flow packet khi sử dụng OpenvSwitch trong Openstack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-12" type="checkbox" id="nav-2-12">
    
    <label class="md-nav__link" for="nav-2-12">
      Nova
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="13">
      <label class="md-nav__title" for="nav-2-12">
        Nova
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nova/1.Introduction-nova/" title="1.  Openstack Compute -Nova" class="md-nav__link">
      1.  Openstack Compute -Nova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nova/2. Install-nova/" title="Cài đặt Nova - Openstack Compute" class="md-nav__link">
      Cài đặt Nova - Openstack Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nova/3.Nova-Client&Curl/" title="Sử dụng Nova" class="md-nav__link">
      Sử dụng Nova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nova/4. Nova-Instance-Work-flow/" title="4. Nova Instance Work flow" class="md-nav__link">
      4. Nova Instance Work flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nova/5. Debug/" title="5. Debug" class="md-nav__link">
      5. Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Nova/6. Config-section/" title="Một số tùy chọn khác trong nova.conf" class="md-nav__link">
      Một số tùy chọn khác trong nova.conf
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tim_hieu_ha_proxy_va_keep_alive" title="Tìm hiểu HA Proxy và Keep Alive" class="md-nav__link">
    Tìm hiểu HA Proxy và Keep Alive
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1_load_balancing_va_cac_khai_niem_lien_quan" title="1. Load Balancing và các khái niệm liên quan" class="md-nav__link">
    1. Load Balancing và các khái niệm liên quan
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_ha_proxy" title="2. HA Proxy" class="md-nav__link">
    2. HA Proxy
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21_mo_au_ve_ha_proxy" title="2.1 . Mở đầu về HA Proxy" class="md-nav__link">
    2.1 . Mở đầu về HA Proxy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22_ha_proxy_lam_uoc_gi_gi" title="2.2 . HA Proxy làm được gì gì ?" class="md-nav__link">
    2.2 . HA Proxy làm được gì gì ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23_ha_proxy_hoat_ong_nhu_the_nao" title="2.3 . HA Proxy hoạt động như thế nào ." class="md-nav__link">
    2.3 . HA Proxy hoạt động như thế nào .
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24_cac_tinh_nang_co_ban" title="2.4 Các tính năng cơ bản" class="md-nav__link">
    2.4 Các tính năng cơ bản
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25_thuat_toan_su_dung_trong_ha_proxy" title="2.5 . Thuật tóan sử dụng trong HA Proxy" class="md-nav__link">
    2.5 . Thuật tóan sử dụng trong HA Proxy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3_keep_alive" title="3. Keep Alive" class="md-nav__link">
    3. Keep Alive
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31_cac_thuat_ngu" title="3.1. Các thuật ngữ" class="md-nav__link">
    3.1. Các thuật ngữ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32_mo_au_ve_keep_alive" title="3.2 Mở đầu về Keep Alive" class="md-nav__link">
    3.2 Mở đầu về Keep Alive
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>1.Intro</h1>
                
                <h2 id="tim_hieu_ha_proxy_va_keep_alive">Tìm hiểu HA Proxy và Keep Alive<a class="headerlink" href="#tim_hieu_ha_proxy_va_keep_alive" title="Permanent link">&para;</a></h2>
<h2 id="1_load_balancing_va_cac_khai_niem_lien_quan">1. Load Balancing và các khái niệm liên quan<a class="headerlink" href="#1_load_balancing_va_cac_khai_niem_lien_quan" title="Permanent link">&para;</a></h2>
<ul>
<li>Cân Bằng Tải là việc phân bố đồng đều lưu lượng truy cập giữa hai hay nhiều các máy chủ có cùng chức năng trong cùng một hệ thống. Bằng cách đó, sẽ giúp cho hệ thống giảm thiểu tối đa tình trạng một máy chủ bị quá tải và ngưng hoạt động. Hoặc khi một máy chủ gặp sự cố, Cân Bằng Tải sẽ chỉ đạo phân phối công việc của máy chủ đó cho các máy chủ còn lại, đẩy thời gian uptime của hệ thống lên cao nhất và cải thiện năng suất hoạt động tổng thể.</li>
<li>
<p>Cân Bằng Tải cũng là cơ chế rất quan trọng trong việc mở rộng quy mô của mạng máy tính. Khi lắp đặt một máy chủ mới vào hệ thống, Cân Bằng Tải sẽ tự động cắt giảm khối lượng công việc từ các máy chủ cũ và chuyển sang máy chủ mới.</p>
</li>
<li>
<p>Một bộ cân bằng tải có thể hoạt động trên :</p>
<ul>
<li>Link level : được gọi là link load balancing, nó gồm việc chọn các network link để gửi các các packet</li>
<li>Network level : được gọi là network load balancing, nó bao gồm các công việc chọn tuyền đường  mà các packet sẽ đi ( packet flow ) </li>
<li>Server level : được gọi là server local balancing,  nó bao gồm các công việc xác định server nào sẽ xử lý tác vụ hoặc request . 
<img alt="" src="https://viblo.asia/uploads/6d9c2602-dfe7-427d-b6c4-bc6a24b4c3c5.png" /></li>
</ul>
</li>
<li>
<p>Load balancing có 2 loại thể hiện qua cách làm v</p>
<ul>
<li>Layer 4: TCP (layer transport - mô hình OSI)</li>
<li>Layer 7: HTTP (layer application - mô hình OSI)</li>
</ul>
</li>
</ul>
<p>Load balancing trên layer 4: sẽ chuyển tiếp những lưu lượng, dữ liệu đi qua nó dựa trên IP và port tương ứng (ví dụ có 1 request tới abc.com  thì tất cả traffic sẽ được truyền tới 1 trong các server backend để xử lý tất cả request cho  abc.com trên port 80). Tất cả các server trong web-backend sẽ phải có nội dung giống hệt nhau nếu không người dùng sẽ có thể nhận ra sự khác nhau đó khi truy cập tới domain tương ứng. Lưu ý là các web-backend phải connect tới cùng 1 database.</p>
<p><img alt="" src="https://viblo.asia/uploads/5f80f07e-1165-4a60-b8c7-3baa9add265f.png" /></p>
<p>Load balancing trên layer 7: cho phép cân bằng tải để chuyển tiếp các request tới những server backend tương ứng dựa trên nội dung của request từ người dùng. Chế độ cân bằng tải này cho phép bạn chạy nhiều máy chủ web dưới cùng một tên miền và cổng.</p>
<p><img alt="" src="https://viblo.asia/uploads/9bc1ea8d-57c5-4845-b297-d954fb197a98.png" /></p>
<ul>
<li>
<p>Proxy là 1 internet server làm nhiệm vụ chuyển tiếp, kiểm soát thông tin giữa client và server, proxy có 1 địa chỉ IP và 1 port cố định. Cách thức hoạt động: tất cả các yêu cầu từ client gửi đến server trước hết phải thông qua proxy, proxy kiếm tra xem yêu cầu nếu được phép sẽ gửi đến server và cũng tương tự cho server.</p>
<p>– Forward proxy: đây là một server nhằm nhiệm vụ chuyển tiếp các packet từ client đến các server khác
<img alt="" src="http://i.imgur.com/7MQJU2X.png" />
– Reverse proxy: đay  là một server đứng trước một hoặc nhiều server, lắng nghe và kiểm soát các kết nối đến từ các client khác. 
<img alt="" src="http://i.imgur.com/HnYxPPX.png" />
- Fail-over là cho phép công việc thường chỉ được thực hiện bởi một máy chủ có thể thực hiện được bởi một máy chủ khác khi một trong 2 máy chủ xảy ra sự cố.</p>
</li>
</ul>
<h2 id="2_ha_proxy">2. HA Proxy<a class="headerlink" href="#2_ha_proxy" title="Permanent link">&para;</a></h2>
<h3 id="21_mo_au_ve_ha_proxy">2.1 . Mở đầu về HA Proxy<a class="headerlink" href="#21_mo_au_ve_ha_proxy" title="Permanent link">&para;</a></h3>
<ul>
<li>HAProxy ( Hight Availability Proxy )  là một phần mềm miễn phí và mã nguồn mở, nó cung cấp khả năng cân bằng tải và proxy server cho TCP và HTTP. Đây là giải pháp phù hợp cho các website có lượng truy cập lớn trên một thời điểm . Trong những năm gần đây HA Proxy đang phở thành bộ công cụ cân bằng tải trên nền tảng mã nguồn mở phổ biến, hiện nay  HA Proxy được phân phối hầu hết trên các bản distrobution chính gốc của Linux . </li>
</ul>
<h3 id="22_ha_proxy_lam_uoc_gi_gi">2.2 . HA Proxy làm được gì gì ?<a class="headerlink" href="#22_ha_proxy_lam_uoc_gi_gi" title="Permanent link">&para;</a></h3>
<p>HA được cấu thành từ nhiều thành phần, và đảm nhiệm được nhiều công việc khác nhau :
-   TCP Proxy: có có thể chấp nhận các kết nối tcp từ listening socket, kết nối nó tới server và gán các sockets này lại với nhau cho phép traffic di chuyển theo cả hai chiều
-   HTTP reverse-proxy: Hay còn gọi là gateway, tự bản thân nó có thể là server, nhận các http requests từ kết nối được thông qua bởi listening TCP socket và chuyển các requests này tới các server bằng nhiều kết nối khác nhau.
-   SSL terminator / initiator / offloader : sử dụng SSL/TLS trên các kết nối đến từ client
-   TCP normalizer : bảo vệ các TCP stack khỏi các cuộc tấn công, 
-   HTTP normalizer : khi cấu hình để xử lý các HTTP traffic, chỉ các request hợp lệ mới được chấp nhận, điều này chống lại các protocol khác có mục đích tấn công. 
-   HTTP fixing tool : có thể tùy chỉnh các các request hoặc các reponse header
-   content-based switch: dựa vào thành phần của request để xác định server nhận
-   server load balancer : nó có thể thực hiện cân bằng tải trên các kết nối TCP và HTTP . Trên TCP nó sẽ nhận tất cả các request , trên HTTP sẽ quyết định chấp nhận trên từng kết nối .
-   traffic regulator: thực hiện một số rule để limit traffic, chống lại việc quá tải , dựa trên nội dung header để xác định được banwith của các kết n
-   protection against DDoS: nó có thể lưu giữ danh số liệu về địa chỉ ip, url,... và thực hiện các hành động (làm chậm, block,...)
- network troubleshooting : xử lý các log 
- HTTP compression offloader : nến các reponse không được nén bởi các server </p>
<h3 id="23_ha_proxy_hoat_ong_nhu_the_nao">2.3 . HA Proxy hoạt động như thế nào .<a class="headerlink" href="#23_ha_proxy_hoat_ong_nhu_the_nao" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>HA Proxy  là một công nghệ đơn luồng, hướng sự kiện và non-blocking ( tham khảo thuật ngữ <a href="https://kipalog.com/posts/Co-che-hoat-dong-cua-javascript-va-nodejs">tại đây</a> ) kết hợp với I/O dựa trên độ ưu tiên của các sheduler . HA proxy chỉ yêu cầu một haproxy package và một tập tin cấu hình để hoạt động. Để ghi chú log có thể sử dụng syslog </p>
</li>
<li>
<p>Trong HAproxy Front-end và back-end được xem là một nửa của proxy, vì chúng chỉ quan tâm kết nối ở đầu còn lại ( front to client, back-end to server ) . Front-end chỉ quan tâm tới client trong khi đó back-end quan tâm tới các server. HA proxy chỉ hỗ trợ khởi tạo một proxy đầy đủ khi có front-end và back-end. Với các HTTP request thì front-end sẽ làm nhiệm vụ filter, trong đó mọi front-end có thể gửi các kết nối tới mọi back-end. Ngoài font-end và back-end ,còn có Access Control List (ACL)
Trong cân bằng tải, ACL được dùng để kiểm tra điều kiện và thực hiện một hành động (ví dụ như lựa chọn một server hay chặn một request) dựa trên kết quả của việc kiểm tra đó. Việc sử dụng ACL cho phép tạo một môi trường có khả năng chuyển tiếp các request một cách linh hoạt dựa trên các yếu tố khác nhau mà người dùng có thể tùy chỉnh một cách dễ dàng.</p>
</li>
<li>
<p>Mỗi khi HA proxy được khởi động , nó thực hiện 3 qúa trình</p>
<ul>
<li>xử lý các kết nối đến</li>
<li>kiểm tra trạng thái của các server ( heath check ) </li>
<li>trao đổi các thông tin với các ha proxy node khác</li>
</ul>
</li>
<li>
<p>Để xử lý một kết nối đến cần trẩi qua rất nhiêfu quá trình, tùy vào từng cấu hình quá trình này có thể phải xử  lý nhiều hoặc ít các tác vụ</p>
<ul>
<li>chấp nhận các kết nối đến từ các socket từ entry "frontend", tuyf vào cấu hình sẽ lắng nghe trên một hoặc nhiều địa chỉ</li>
<li>dựa vào các rule front-end sẽ xử lý các kết nối này : chặn, chỉnh sửa các header....</li>
<li>chấp nhận các kết nối đến tới entry "back-end" nơi chứa các server và các quy tắc để cân bằng tải trên các server này</li>
<li>áp dụng các rule back-end để xử lý các kết nối</li>
<li>xác định server sẽ được chuyển tiếp các kết nối để thực hiện các chiến lược cân bằng tải</li>
<li>áp dụng các back-end rule cho các response data</li>
<li>áp dụng các front-end rule cho các response data</li>
<li>xử lý log để xem tiến trình</li>
<li>trong HTTP, sẽ trở lại bước 2 để nghe các kết nối tiếp theo hoặc là đóng kết nối </li>
</ul>
</li>
</ul>
<h3 id="24_cac_tinh_nang_co_ban">2.4 Các tính năng cơ bản<a class="headerlink" href="#24_cac_tinh_nang_co_ban" title="Permanent link">&para;</a></h3>
<ul>
<li>Proxying</li>
<li>SSL</li>
<li>Monitoring</li>
<li>HA</li>
<li>Load balancing</li>
<li>Sampling and converting information</li>
<li>Maps</li>
<li>ACLs and conditions</li>
<li>Content switching</li>
<li>HTTP rewriting and redirection</li>
<li>Server protection</li>
<li>Logging</li>
<li>
<p>Statistics</p>
</li>
<li>
<p><a href="http://cbonte.github.io/haproxy-dconv/1.9/intro.html#1">Tham khảo thêm </a></p>
</li>
</ul>
<h3 id="25_thuat_toan_su_dung_trong_ha_proxy">2.5 . Thuật tóan sử dụng trong HA Proxy<a class="headerlink" href="#25_thuat_toan_su_dung_trong_ha_proxy" title="Permanent link">&para;</a></h3>
<p>Back-end làm việc với các server farm và xử lý các request tới chúng bằng cách làm việc với các th</p>
<ul>
<li>Round Robin: Đây là thuật toán cân bằng đơn giản nhất. Đối với mỗi kết nối mới, nó sẽ được xử lý bởi các máy chủ backend tiếp theo. Nếu máy chủ backend cuối cùng trong danh sách được đạt tới, nó sẽ bắt đầu lại từ đầu danh sách backend.</li>
<li>Least Connections: Các kết nối mới sẽ được xử lý bởi các máy chủ backend với số lượng kết nối ít nhất. Điều này rất hữu ích khi thời gian và các request rất lớn.</li>
<li>Source: Đây là phiên dính, các IP của client sẽ được băm để xác định máy chủ backend đã nhận được yêu cầu cuối cùng từ IP này. Vì vậy, một IP A sẽ luôn được xử lý bởi backend1, và IP B sẽ luôn luôn được xử lý bởi banckend2 để không làm gián đoạn phiên.</li>
<li>Static Round Robin: Tương tự như Round Robin, mỗi máy chủ được sử dụng trong vòng lặp dựa trên weight. Nhưng thay đổi weight của máy chủ trên cũng không ảnh hưởng gì. Bạn có thể tự xác định bao nhiêu server mà bạn muốn. Khi một máy chủ tăng lên, nó sẽ luôn luôn được ngay lập tức đưa lại vào 1 bảng sau khi được tính toán lại weight.</li>
<li>URI: Thuật toán này băm hoặc phần bên trái của URI, hoặc toàn bộ URI và chia giá trị băm bằng tổng weight của máy chủ đang chạy. Cùng URI luôn hướng đến cùng một server miễn là không có máy chủ up hoặc down. Nó cũng là một thuật toán tĩnh và hoạt động theo cách tương tự như các thuật toán Source.</li>
<li>URL Parameter: Thuật toán tĩnh này chỉ có thể được sử dụng trên một backend HTTP. Các tham số URL được chỉ định sẽ được nhìn trong chuỗi truy vấn của mỗi yêu cầu HTTP GET. Nếu tham số đó được tìm thấy bởi một dấu hiệu và giá trị như nhau, giá trị được băm và chia cho tổng trọng lượng của máy chủ đang chạy.</li>
</ul>
<h2 id="3_keep_alive">3. Keep Alive<a class="headerlink" href="#3_keep_alive" title="Permanent link">&para;</a></h2>
<h3 id="31_cac_thuat_ngu">3.1. Các thuật ngữ<a class="headerlink" href="#31_cac_thuat_ngu" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>VIP : Virtual IP, sử dụng cho các client truy cập</p>
</li>
<li>
<p>Keep Alived sử dụng 4 module kernel để làm việc</p>
<ul>
<li>LVS framework : dùng để giao tiếp socket</li>
<li>Netfilter framework : sử dụng để hoạt động IP Virtual Server</li>
<li>Netlink interface : điều khiển , thêm xóa VRRRP VIP trên card mạng</li>
<li>Multicast : gửi các bản tin VRRP đến địa chỉ multicast </li>
</ul>
</li>
<li>
<p>Virtual Router Redundancy Protocol – VRRP có chức năng tương tự như với HSRP là cho phép các Router cisco cùng tham gia một nhóm xây dựng một router ảo làm gateway cho các host nằm trên mạng LAN, thực hiện dự phòng gateway cho các host đầu cuối này. Điểm khác biệt là nếu HSRP là giao thức của Cisco chỉ chạy trên thiết bị Cisco, thì VRRP là giao thức quốc tế có thể chạy trên nhiều sản phẩm của nhiều nhà sản xuất khác nhau. VRRP được mô tả trong RFC – 3768 của IETF.</p>
</li>
</ul>
<h3 id="32_mo_au_ve_keep_alive">3.2 Mở đầu về Keep Alive<a class="headerlink" href="#32_mo_au_ve_keep_alive" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Cân bằng tải trên tầng 4 và tầng 7 được miêu tả ở trên đều được sử dụng để cân bằng tải để chuyển các request tới các backend server. Tuy nhiên, chính câng bằng tải của bạn là một điểm lỗi (single point of failure), vì nếu cân bằng tải gặp sự cố nhưng các server đều chạy bình thường thì người dùng cũng không thể kết nối đến được ứng dụng web trong khi web server vẫn đang chạy bình thường.</p>
</li>
<li>
<p>Keep Alive được hiểu là một heat beat packet trong một mô hình mạng, được một thiết bị như Router gửi một packet đến các thiết bị khác trong một mô hình mạng , mục đích của keep alive nhằm kiểm tra trạng thái kết nối giữa các thiết bị với nhau . </p>
</li>
<li>
<p>Để hoạt động keep alive có 2 kiểm cần chú ý :</p>
<ul>
<li>keep alive interval : thời gian gửi packet kiểm tra giữa các packet. </li>
<li>keep alive retries : số lần cố gắn gửi packet đến một thiết bị khi không được reply để xác định làm một hành động thiếp theo. </li>
</ul>
</li>
<li>
<p>Như vậy keep alive sẽ hoạt động như sau :</p>
<ul>
<li>Một gói tin <strong>keep alive</strong> được gửi từ A đến B với mốc thời gianj theo định kỳ</li>
<li>Sau khi thiết bị A gửi gói tin sẽ chờ phản phồi từ thiết bị B, lúc này sẽ xảy ra 2 trường hợp :<ul>
<li>Thiết bị B sẽ trả về một response để thiết bị A biết trạng thái</li>
<li>Sau n lần thử thiết bị A không thể nhận được response từ thiết bị B, thiết bị A sẽ sẽ như đường này đang ở trạng thái down</li>
</ul>
</li>
<li>Sau đó thiết bị A sẽ quyết định chuyển hươngs data dựa vào output ở bước 2</li>
</ul>
</li>
<li>
<p>IP VIP : Thực sự nó là một IP được gán thêm trên một network alias (virtual interface) của haproxy. Tính chất virtual của nó nằm ở chỗ nó không gắn cố định trên một network interface thật sự nào cả. Khi có sự cố xảy ra, keepalived sẽ hủy ip trên network alias của haproxy down và tạo trên haproxy backup</p>
</li>
<li>Trong HA, keep alive cung cấp VIP ) cho một Cluser . Cho phép các bộ cân bằng tải hoạt động theo cơ chế Active-Backup. Nếu bộ load balancer chính bị down , thì IP Floating sẽ được chuyển về về bộ load blancer phụ, nhờ đó cung cấp khả năng failure cho hệ thống này.</li>
</ul>
<p>-
<img alt="" src="https://assets.digitalocean.com/articles/high_availability/ha-diagram-animated.gif" /></p>
<p>END.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../1. Introduction-HA/" title="1. Introduction HA" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                1. Introduction HA
              </span>
            </div>
          </a>
        
        
          <a href="../2. Setup-HA-Proxy-&&-KeepAlive/" title="2. Setup HA Proxy && KeepAlive" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                2. Setup HA Proxy && KeepAlive
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            nguyenhungsync
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.9e1f3b71.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../../.."}})</script>
      
    
    
      
    
  </body>
</html>
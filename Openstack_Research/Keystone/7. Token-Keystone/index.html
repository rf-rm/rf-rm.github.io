



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="rf-rm Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.1.0">
    
    
      
        <title>Tìm hiểu Token trong Openstack - rf-rm Command</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.11e41852.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.20ef595d.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#tim_hieu_token_trong_openstack" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="rf-rm Command" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                rf-rm Command
              </span>
              <span class="md-header-nav__topic">
                Tìm hiểu Token trong Openstack
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="rf-rm Command" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    rf-rm Command
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Remove Everything with `rm-rf /`" class="md-nav__link">
      Remove Everything with `rm-rf /`
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Openstack Research
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Openstack Research
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../1. Intro Cloud Computing/" title="Cloud Computing and Openstack" class="md-nav__link">
      Cloud Computing and Openstack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2.install-pack-stack/" title="2.install pack stack" class="md-nav__link">
      2.install pack stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Readme/" title="Readme" class="md-nav__link">
      Readme
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Advance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="5">
      <label class="md-nav__title" for="nav-2-4">
        Advance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/1. Key-Rotate-&-Decrypt/" title="Fernet và Rotate trong OPS" class="md-nav__link">
      Fernet và Rotate trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/10. Limit-CPU-Resource/" title="10. Limit CPU Resource" class="md-nav__link">
      10. Limit CPU Resource
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/11. Metadata/" title="11. Metadata" class="md-nav__link">
      11. Metadata
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/12. Cloud-init/" title="12. Cloud init" class="md-nav__link">
      12. Cloud init
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/13. Cloud-init-Script/" title="13. Cloud init Script" class="md-nav__link">
      13. Cloud init Script
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/14. QOS - Neutron/" title="14. QOS   Neutron" class="md-nav__link">
      14. QOS   Neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/15. QOS - Cinder/" title="15. QOS   Cinder" class="md-nav__link">
      15. QOS   Cinder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/16. Cinder-Backup-NFS/" title="16. Cinder Backup NFS" class="md-nav__link">
      16. Cinder Backup NFS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/17. Transfer-&-Extend-Root-Volume/" title="17. Transfer & Extend Root Volume" class="md-nav__link">
      17. Transfer & Extend Root Volume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/18. L3-Agent-HA-Compute/" title="18. L3 Agent HA Compute" class="md-nav__link">
      18. L3 Agent HA Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/2.RabbitMQ-&-API-Endpoint/" title="2.RabbitMQ & API Endpoint" class="md-nav__link">
      2.RabbitMQ & API Endpoint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/3. Log/" title="3. Log" class="md-nav__link">
      3. Log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/4. Setup-noVNC/" title="noVNC trong OPS" class="md-nav__link">
      noVNC trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/5. Nova-Compute-Serice-&-RabbitMQ/" title="5. Nova Compute Serice & RabbitMQ" class="md-nav__link">
      5. Nova Compute Serice & RabbitMQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/6. Placement-API-&-Nova-Conductor/" title="6. Placement API & Nova Conductor" class="md-nav__link">
      6. Placement API & Nova Conductor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/7.1.  Resource-Management-OPS/" title="Resource Management trong OPS" class="md-nav__link">
      Resource Management trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/7.2 . Nova-Scheduler-&-Host-Aggreaggregate/" title="1. Nova-scheduler" class="md-nav__link">
      1. Nova-scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/7.3. Lab-Filter-Scheduler/" title="7.3. Lab Filter Scheduler" class="md-nav__link">
      7.3. Lab Filter Scheduler
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/8. Resize-instance/" title="8. Resize instance" class="md-nav__link">
      8. Resize instance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Advance/9. Rescue-instance/" title="1. Nova-rescue" class="md-nav__link">
      1. Nova-rescue
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Barbican
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="6">
      <label class="md-nav__title" for="nav-2-5">
        Barbican
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Barbican/1. Intro-Setup/" title="1. Intro Setup" class="md-nav__link">
      1. Intro Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Barbican/2. Command/" title="2. Command" class="md-nav__link">
      2. Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-6" type="checkbox" id="nav-2-6">
    
    <label class="md-nav__link" for="nav-2-6">
      Cinder
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="7">
      <label class="md-nav__title" for="nav-2-6">
        Cinder
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/1. Introduction-cinder/" title="OpenStack Block Storage - Cinder" class="md-nav__link">
      OpenStack Block Storage - Cinder
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/2. Cinder-Disk-Work-Flow/" title="2. Cinder Disk Work Flow" class="md-nav__link">
      2. Cinder Disk Work Flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/3. Install-Cinder-LVM/" title="3. Install Cinder LVM" class="md-nav__link">
      3. Install Cinder LVM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/4. Basic-Command/" title="4. Basic Command" class="md-nav__link">
      4. Basic Command
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/5. Install-Multi-Backend/" title="5. Install Multi Backend" class="md-nav__link">
      5. Install Multi Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/6. Filtering-Multi-Backend/" title="6. Filtering Multi Backend" class="md-nav__link">
      6. Filtering Multi Backend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cinder/7. Cinder-More/" title="7. Cinder More" class="md-nav__link">
      7. Cinder More
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-7" type="checkbox" id="nav-2-7">
    
    <label class="md-nav__link" for="nav-2-7">
      Glance
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="8">
      <label class="md-nav__title" for="nav-2-7">
        Glance
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Glance/1. Introduction-Glance/" title="OPENSTACK IMAGE - GLANCE" class="md-nav__link">
      OPENSTACK IMAGE - GLANCE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Glance/2. Install Glance/" title="Cài đặt Glance - Openstack IMAGE" class="md-nav__link">
      Cài đặt Glance - Openstack IMAGE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Glance/3. Openstack-Glance-&-CURL/" title="Làm việc với Glance" class="md-nav__link">
      Làm việc với Glance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Glance/4. Config/" title="Tìm hiểu cấu hình cơ bản trong Glance" class="md-nav__link">
      Tìm hiểu cấu hình cơ bản trong Glance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Glance/5. Glance-Advanced/" title="5. Glance Advanced" class="md-nav__link">
      5. Glance Advanced
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8" type="checkbox" id="nav-2-8">
    
    <label class="md-nav__link" for="nav-2-8">
      High availability
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="9">
      <label class="md-nav__title" for="nav-2-8">
        High availability
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/1. Introduction-HA/" title="1. Introduction HA" class="md-nav__link">
      1. Introduction HA
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8-2" type="checkbox" id="nav-2-8-2">
    
    <label class="md-nav__link" for="nav-2-8-2">
      1.HA Proxy   KeepAlive
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="11">
      <label class="md-nav__title" for="nav-2-8-2">
        1.HA Proxy   KeepAlive
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/1.HA-Proxy---KeepAlive/1.Intro/" title="1.Intro" class="md-nav__link">
      1.Intro
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/1.HA-Proxy---KeepAlive/2. Setup-HA-Proxy-&&-KeepAlive/" title="2. Setup HA Proxy && KeepAlive" class="md-nav__link">
      2. Setup HA Proxy && KeepAlive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/1.HA-Proxy---KeepAlive/3.HA-Proxy-OPS/" title="3.HA Proxy OPS" class="md-nav__link">
      3.HA Proxy OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/1.HA-Proxy---KeepAlive/4. HAProxy-HTTP&Config/" title="4. HAProxy HTTP&Config" class="md-nav__link">
      4. HAProxy HTTP&Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/1.HA-Proxy---KeepAlive/5.  HAproxy-ACL/" title="5.  HAproxy ACL" class="md-nav__link">
      5.  HAproxy ACL
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8-3" type="checkbox" id="nav-2-8-3">
    
    <label class="md-nav__link" for="nav-2-8-3">
      2. Octavia
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="12">
      <label class="md-nav__title" for="nav-2-8-3">
        2. Octavia
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/2. Octavia/1.Intro+Setup/" title="1.Intro+Setup" class="md-nav__link">
      1.Intro+Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/2. Octavia/2.Use-Octavia/" title="2.Use Octavia" class="md-nav__link">
      2.Use Octavia
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/2. Octavia/3. Octavia-Keep-Alived/" title="3. Octavia Keep Alived" class="md-nav__link">
      3. Octavia Keep Alived
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/2. Octavia/4 .VIP-QOS/" title="4 .VIP QOS" class="md-nav__link">
      4 .VIP QOS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/2. Octavia/5.Theory-Octavia-L7-Policy/" title="5.Theory Octavia L7 Policy" class="md-nav__link">
      5.Theory Octavia L7 Policy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/2. Octavia/6. LAB-Octavia-L7-Policy/" title="6. LAB Octavia L7 Policy" class="md-nav__link">
      6. LAB Octavia L7 Policy
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-8-4" type="checkbox" id="nav-2-8-4">
    
    <label class="md-nav__link" for="nav-2-8-4">
      3. Pacemaker
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="13">
      <label class="md-nav__title" for="nav-2-8-4">
        3. Pacemaker
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/3. Pacemaker/1. Intro-Pacemaker/" title="1. Intro Pacemaker" class="md-nav__link">
      1. Intro Pacemaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/3. Pacemaker/2. Install-Pacemaker/" title="2. Install Pacemaker" class="md-nav__link">
      2. Install Pacemaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/3. Pacemaker/3. Use-Pacemaker/" title="3. Use Pacemaker" class="md-nav__link">
      3. Use Pacemaker
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/3. Pacemaker/4. Pacemaker-Apache-Active-Passive/" title="4. Pacemaker Apache Active Passive" class="md-nav__link">
      4. Pacemaker Apache Active Passive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../High-availability/3. Pacemaker/corosync/" title="Corosync" class="md-nav__link">
      Corosync
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-9" type="checkbox" id="nav-2-9">
    
    <label class="md-nav__link" for="nav-2-9">
      Horizon
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="10">
      <label class="md-nav__title" for="nav-2-9">
        Horizon
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Horizon/Introduction-horizon/" title="OpenStack Dashboard - Horizon" class="md-nav__link">
      OpenStack Dashboard - Horizon
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-10" type="checkbox" id="nav-2-10" checked>
    
    <label class="md-nav__link" for="nav-2-10">
      Keystone
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="11">
      <label class="md-nav__title" for="nav-2-10">
        Keystone
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../1. Introduction-Keystone/" title="1. Openstack Indentify ( Keystone )" class="md-nav__link">
      1. Openstack Indentify ( Keystone )
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../2.Install-Keystone/" title="Cài đặt và cấu hình Keystone" class="md-nav__link">
      Cài đặt và cấu hình Keystone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3. Architecture-Keystone( additional )/" title="1. Kiến trúc trong Keystone ( bổ sung )" class="md-nav__link">
      1. Kiến trúc trong Keystone ( bổ sung )
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../4. Config-Keystone/" title="4. Config Keystone" class="md-nav__link">
      4. Config Keystone
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../5. Keystone-Openstack-CLI/" title="Làm việc với Keystone qua CLI" class="md-nav__link">
      Làm việc với Keystone qua CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../6. Keystone-CURL/" title="1. Application Credentials" class="md-nav__link">
      1. Application Credentials
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Tìm hiểu Token trong Openstack
      </label>
    
    <a href="./" title="Tìm hiểu Token trong Openstack" class="md-nav__link md-nav__link--active">
      Tìm hiểu Token trong Openstack
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1_co_ban_ve_keystone_token" title="1. Cơ bản về Keystone Token" class="md-nav__link">
    1. Cơ bản về Keystone Token
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_token_provider" title="2. Token Provider" class="md-nav__link">
    2. Token Provider
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21_uuid" title="2.1 : UUID" class="md-nav__link">
    2.1 : UUID
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22_pki_va_pkiz_token" title="2.2. PKI và PKIZ Token" class="md-nav__link">
    2.2. PKI và PKIZ Token
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21_qua_trinh_sinh_token_pki_va_pkiz" title="2.1. Quá trình sinh token PKI và PKIZ" class="md-nav__link">
    2.1. Quá trình sinh token PKI và PKIZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22_qua_trinh_validate_va_thu_hoi_pki_va_pkiz_token" title="2.2. Quá trình validate và thu hồi PKI và PKIZ token" class="md-nav__link">
    2.2. Quá trình validate và thu hồi PKI và PKIZ token
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23_fernet" title="2.3 : Fernet" class="md-nav__link">
    2.3 : Fernet
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231_co_ban_ve_fernet" title="2.3.1 . Cơ bản về fernet" class="md-nav__link">
    2.3.1 . Cơ bản về fernet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232_fernet_key_la_gi" title="2.3.2 . Fernet key là gì ?" class="md-nav__link">
    2.3.2 . Fernet key là gì ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233_fernet_key_repo" title="2.3.3 . Fernet key repo" class="md-nav__link">
    2.3.3 . Fernet key repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234_fernet_key_rotation" title="2.3.4 :Fernet Key Rotation" class="md-nav__link">
    2.3.4 :Fernet Key Rotation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235token_generation_workflow" title="2.3.5.Token Generation Workflow" class="md-nav__link">
    2.3.5.Token Generation Workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236token_validation_workflow" title="2.3.6.Token Validation Workflow" class="md-nav__link">
    2.3.6.Token Validation Workflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3_tham_khao_them" title="3. Tham khảo thêm" class="md-nav__link">
    3. Tham khảo thêm
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-11" type="checkbox" id="nav-2-11">
    
    <label class="md-nav__link" for="nav-2-11">
      Neutron
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="12">
      <label class="md-nav__title" for="nav-2-11">
        Neutron
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/1. Introduction-neutron/" title="Openstack networking - Neutron" class="md-nav__link">
      Openstack networking - Neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/10. OPS-Packet-Provider/" title="10. OPS Packet Provider" class="md-nav__link">
      10. OPS Packet Provider
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/11. VXLAN-Tunnel/" title="11. VXLAN Tunnel" class="md-nav__link">
      11. VXLAN Tunnel
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/12. VXLAN-Tunnel-Host-pair-OPS/" title="12. VXLAN Tunnel Host pair OPS" class="md-nav__link">
      12. VXLAN Tunnel Host pair OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/2. Install Neutron Linux Bridge/" title="Cài đặt Neutron  -- Linux Bridge" class="md-nav__link">
      Cài đặt Neutron  -- Linux Bridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/2.1 . OVS-Self-Services/" title="2.1 . OVS Self Services" class="md-nav__link">
      2.1 . OVS Self Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/2.2. OVS Self-Service-&-Provider/" title="2.2. OVS Self Service & Provider" class="md-nav__link">
      2.2. OVS Self Service & Provider
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/3. Neutron-CLI/" title="Làm việc với Neutron" class="md-nav__link">
      Làm việc với Neutron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/4. Neutron-Namespace-Agent/" title="TÌm hiểu Namepsace , DHCP, Agent trong OPS" class="md-nav__link">
      TÌm hiểu Namepsace , DHCP, Agent trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/5.  Packet-Walkthrough-Linux-Bridge/" title="Neutron Traffic Flow trong Linux Bridge" class="md-nav__link">
      Neutron Traffic Flow trong Linux Bridge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/6. Bonding/" title="Tìm hiểu bonding trong Centos" class="md-nav__link">
      Tìm hiểu bonding trong Centos
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/7. VXLAN/" title="7. VXLAN" class="md-nav__link">
      7. VXLAN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/8. OpenvSwitch-OPS/" title="Tìm hiểu OVS trong OPS" class="md-nav__link">
      Tìm hiểu OVS trong OPS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Neutron/9. OPS-Packet-Self-Service/" title="Tìm hiểu flow packet khi sử dụng OpenvSwitch trong Openstack" class="md-nav__link">
      Tìm hiểu flow packet khi sử dụng OpenvSwitch trong Openstack
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-12" type="checkbox" id="nav-2-12">
    
    <label class="md-nav__link" for="nav-2-12">
      Nova
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="13">
      <label class="md-nav__title" for="nav-2-12">
        Nova
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nova/1.Introduction-nova/" title="1.  Openstack Compute -Nova" class="md-nav__link">
      1.  Openstack Compute -Nova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nova/2. Install-nova/" title="Cài đặt Nova - Openstack Compute" class="md-nav__link">
      Cài đặt Nova - Openstack Compute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nova/3.Nova-Client&Curl/" title="Sử dụng Nova" class="md-nav__link">
      Sử dụng Nova
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nova/4. Nova-Instance-Work-flow/" title="4. Nova Instance Work flow" class="md-nav__link">
      4. Nova Instance Work flow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nova/5. Debug/" title="5. Debug" class="md-nav__link">
      5. Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Nova/6. Config-section/" title="Một số tùy chọn khác trong nova.conf" class="md-nav__link">
      Một số tùy chọn khác trong nova.conf
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1_co_ban_ve_keystone_token" title="1. Cơ bản về Keystone Token" class="md-nav__link">
    1. Cơ bản về Keystone Token
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2_token_provider" title="2. Token Provider" class="md-nav__link">
    2. Token Provider
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21_uuid" title="2.1 : UUID" class="md-nav__link">
    2.1 : UUID
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22_pki_va_pkiz_token" title="2.2. PKI và PKIZ Token" class="md-nav__link">
    2.2. PKI và PKIZ Token
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21_qua_trinh_sinh_token_pki_va_pkiz" title="2.1. Quá trình sinh token PKI và PKIZ" class="md-nav__link">
    2.1. Quá trình sinh token PKI và PKIZ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22_qua_trinh_validate_va_thu_hoi_pki_va_pkiz_token" title="2.2. Quá trình validate và thu hồi PKI và PKIZ token" class="md-nav__link">
    2.2. Quá trình validate và thu hồi PKI và PKIZ token
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23_fernet" title="2.3 : Fernet" class="md-nav__link">
    2.3 : Fernet
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231_co_ban_ve_fernet" title="2.3.1 . Cơ bản về fernet" class="md-nav__link">
    2.3.1 . Cơ bản về fernet
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232_fernet_key_la_gi" title="2.3.2 . Fernet key là gì ?" class="md-nav__link">
    2.3.2 . Fernet key là gì ?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#233_fernet_key_repo" title="2.3.3 . Fernet key repo" class="md-nav__link">
    2.3.3 . Fernet key repo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#234_fernet_key_rotation" title="2.3.4 :Fernet Key Rotation" class="md-nav__link">
    2.3.4 :Fernet Key Rotation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#235token_generation_workflow" title="2.3.5.Token Generation Workflow" class="md-nav__link">
    2.3.5.Token Generation Workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#236token_validation_workflow" title="2.3.6.Token Validation Workflow" class="md-nav__link">
    2.3.6.Token Validation Workflow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3_tham_khao_them" title="3. Tham khảo thêm" class="md-nav__link">
    3. Tham khảo thêm
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="tim_hieu_token_trong_openstack">Tìm hiểu Token trong Openstack<a class="headerlink" href="#tim_hieu_token_trong_openstack" title="Permanent link">&para;</a></h1>
<h2 id="1_co_ban_ve_keystone_token">1. Cơ bản về Keystone Token<a class="headerlink" href="#1_co_ban_ve_keystone_token" title="Permanent link">&para;</a></h2>
<ul>
<li>Token được sử dụng trong Keystone để xác thực và ủy quyền cho phép các tương tác của người dùng tới các API endpoint. Token có nhiều loại đại diện cho nhiều kiểu xác thực và nhận dạng . Có rất nhiều <code>token provider</code> mỗi provider có đặc tính rieeng cho quá trình phát triển</li>
<li>Token có thể dùng để thực hiện ủy quyền trên nhiều phạm vi khác nhau . Người dùng sẽ có mỗi đặc quyền riêng bởi các role, trên các project và domain . Mỗi phạm vi sẽ ảnh hưởng đến các service nằm trong phạm vi đó . <ul>
<li>Unscoped token không tác động đến service , catalog, project, domain . Khi sử dụng unscoped token thì chỉ mang tính đạng danh, không được tương tác với các compoment khác</li>
<li>Project-scoped token : được sử dụng để có thể tác động tới các serivce khác. Chúng chưa các catalog , role và các thông tin của project và được ủy quyền</li>
<li>Domain-scoped token : được sủ dụng ít, có thể làm việc tới các đối tưowngj dưới domain, </li>
</ul>
</li>
</ul>
<h2 id="2_token_provider">2. Token Provider<a class="headerlink" href="#2_token_provider" title="Permanent link">&para;</a></h2>
<p>Token provider trong keystone được cấu hình tại <code>/etc/keystone/keystone.conf</code>. Hiện tại có 4 kiểu token provider hỗ trợ :  <code>UUID</code> <code>fernet</code> , <code>PKI</code>và <code>PKIZ</code> </p>
<p><img alt="" src="https://camo.githubusercontent.com/b15a8e105a082c411ed74fb87f2ca6123bdead67/687474703a2f2f692e696d6775722e636f6d2f55764359474d342e706e67" /></p>
<h2 id="21_uuid">2.1 : UUID<a class="headerlink" href="#21_uuid" title="Permanent link">&para;</a></h2>
<ul>
<li>Kích thước nhỏ gọn, là chuỗi ngẫu nhiên 32 ký tự</li>
<li>Tạo nên từ các chỉ số hệ thập lục phân</li>
<li>Tokens URL thân thiện và an toàn khi gửi đi trong môi trường non-binary.</li>
<li>Lưu trữ trong hệ thống backend (như database) bề vững để sẵn sàng cho mục đích xác thực</li>
<li>UUID không bị xóa trong hệ thống lưu trữ nhưng sẽ bị đánh dấu là "revoked" (bị thu hồi) thông qua DELETE request với token ID tương ứng.</li>
<li>
<p>UUID không mang thông tin gì về User. Keystone phải thực hiện việc xác thực token và lưu trữ, với kích thước của hệ thống mở rộng hơn thì hiệu xuất của Keystone sẽ bị ảnh hưởng.</p>
</li>
<li>
<p>Workflow tạo UUID token diễn ra như sau:</p>
<ul>
<li>User request tới keystone tạo token với các thông tin: user name, password, project name</li>
<li>Chứng thực user, lấy User ID từ backend LDAP (dịch vụ Identity)</li>
<li>Chứng thực project, thu thập thông tin Project ID và Domain ID từ Backend SQL (dịch vụ Resources)</li>
<li>Lấy ra Roles từ Backend trên Project hoặc Domain tương ứng trả về cho user, nếu user không có bất kỳ roles nào thì trả về Failure(dịch vụ Assignment)</li>
<li>Thu thập các Services và các Endpoints của các service đó (dịch vụ Catalog)</li>
<li>Tổng hợp các thông tin về Identity, Resources, Assignment, Catalog ở trên đưa vào Token payload, tạo ra token sử dụng hàm uuid.uuid4().hex</li>
<li>Lưu thông tin của Token và SQL/KVS backend với các thông tin: TokenID, Expiration, Valid, UserID, Extra</li>
</ul>
</li>
</ul>
<h2 id="22_pki_va_pkiz_token">2.2. PKI và PKIZ Token<a class="headerlink" href="#22_pki_va_pkiz_token" title="Permanent link">&para;</a></h2>
<p>PKI token chứa toàn bộ thông tin xác thực nhận được từ Keystone. Điều này có nghĩa là token chứa lượng lớn các thông tin: như là thời gian cấp phát, thời gian hết hạn, định danh user, thông tin project, domain và role cho user, catalog dịch vụ, và nhiều thông tin khác. Chính vì mang quá nhiều thông tin nên nó lại là điểm yếu của loại token này vì khi hệ thống được mở rộng các thông tin user và catalog càng nhiều trong khi đó HTTP Header chỉ giới hạn 8KB.</p>
<p>Để khác phục điều này thì Openstack cũng đưa ra một loại token PKIZ với khả năng nén token xuống kích thước tối thiểu. Mặc dù đã được nén nhưng PKIZ vẫn bị cộng đồng Openstack đánh giá là kích thước quá lớn. Ưu điểm của loại token này là các OpenStack services có thể cache lại token này để đưa ra quyết định ủy quyền mà không phải liên hệ lại keystone nên đã giải quyết được vấn đề tắc nghẽn cổ chai của UUID token.</p>
<h3 id="21_qua_trinh_sinh_token_pki_va_pkiz">2.1. Quá trình sinh token PKI và PKIZ<a class="headerlink" href="#21_qua_trinh_sinh_token_pki_va_pkiz" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://techvccloud.mediacdn.vn/2018/1/Token-Type-4.png" /></p>
<p>Cũng giống như UUID token với PKI và PKIZ token thì User cần gửi các thông tin để Keystone xác thực và cấp token, nhưng có một điểm khác là loại token này sử dụng hệ mật mã khóa bất đối xứng tức là dùng khóa Private Key của keystone để mã hóa Payload token, khi user sử dụng token này thì các service trong Openstack sẽ sử dụng Public Key để giải mã và lấy ra các thông tin. Các bước khởi tạo token PKI được thể hiện rất rõ ở hình ảnh trên.</p>
<h3 id="22_qua_trinh_validate_va_thu_hoi_pki_va_pkiz_token">2.2. Quá trình validate và thu hồi PKI và PKIZ token<a class="headerlink" href="#22_qua_trinh_validate_va_thu_hoi_pki_va_pkiz_token" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://techvccloud.mediacdn.vn/2018/1/Token-Type-5.png" /></p>
<p>Quá trình này hoàn toàn tương tự vơi UUID token. Quá trình thu hồi cũng hoàn toàn tương tự UUID token.</p>
<h2 id="23_fernet">2.3 : Fernet<a class="headerlink" href="#23_fernet" title="Permanent link">&para;</a></h2>
<h3 id="231_co_ban_ve_fernet">2.3.1 . Cơ bản về fernet<a class="headerlink" href="#231_co_ban_ve_fernet" title="Permanent link">&para;</a></h3>
<ul>
<li>Fernet token được sử dụng đầu tiền tại Openstack Kilo . Không giống như các loại token khác fernet không yêu cầu sử dụng backend </li>
<li>Fernet token chưa một số lượng dữ liệu nhận dạng và ủy quyền trong <a href="http://msgpack.org/">MessagePacked</a> . Payload sẽ đóng gói các Fernet token . Dữ liệu trong Fernet token được bảo vệ bởi các thuật toán mã hóa đối xứng hoặc 2 fernet key</li>
</ul>
<h3 id="232_fernet_key_la_gi">2.3.2 . Fernet key là gì ?<a class="headerlink" href="#232_fernet_key_la_gi" title="Permanent link">&para;</a></h3>
<ul>
<li>Fernet key được dùng trong việc mã hóa và giải mã các Fernet token. Trong mỗi kernet key bao gồm 2 khóa hỏ hơn : a 128-bit AES256 encryption key và . 128-bit SHA256 HMAC signing key . Fernet key được lưu tại key respo mà payload có thể chuyển đến thư viện xử lý mã hóa và giải mã mã token </li>
<li>Fernet sẽ đến thư mục chứa các key, thực hiện tất cả mã hóa bằng cách sử dụng khóa đầu tiên trong danh sách và cố gắng giải mã bằng tất cả các khóa từ danh sách đó. Keystone fernet token trông giống như sau:</li>
</ul>
<pre><code>gAAAAABWHXT73mGHg90PE6rmS-6aeYYvdErvO1RCWbDBrM5JV6L-eGEkz9cv8598DWWF5LZH5buzYM6PmUk3w9PHd4j6zs9L0_nvqZAGOrA4gLjhE10MLk00_Qy-IIPMQ6kxjsphYVLP1uBUNyh-s4hq76-KGNUqAcYgLyN8DtgoifDseSZKNl8

</code></pre>

<h3 id="233_fernet_key_repo">2.3.3 . Fernet key repo<a class="headerlink" href="#233_fernet_key_repo" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Key repo là yêu cầu tối thiểu để khởi tạo một fernet token.  Những key được lưu trong repo nhăm mục đích mã hóa và giải mã trong quá trình  đóng gói fernet token .Mỗi key trong repo có thể có một trong ba trạng thái. Trạng thái của khóa xác định cách keystone sử dụng fernet token. Các loại khác nhau như sau:</p>
<ul>
<li>
<p>Loại 1 - Primary Key: sử dụng cho cả 2 mục đích mã hóa và giải mã fernet tokens. Các key được đặt tên theo số nguyên bắt đầu từ 0. Trong đó Primary Key có chỉ số cao nhất.</p>
</li>
<li>
<p>Loại 2 - Secondary Key: chỉ dùng để giải mã. -&gt; Lowest Index &lt; Secondary Key Index &lt; Highest Index</p>
</li>
<li>
<p>Loại 3 - Stagged Key:  tương tự như secondary key trong trường hợp nó sử dụng để giải mã token. Tuy nhiên nó sẽ trở thành Primary Key trong lần luân chuyển khóa tiếp theo. Stagged Key có chỉ số 0
-- Fernet Keys được lưu tại  <code>/etc/keystone/fernet-keys/</code>
<img alt="" src="https://camo.githubusercontent.com/b48b918b6fba34e75082c704b83efe27c9af896c/687474703a2f2f696d6775722e636f6d2f736962475232522e706e67" /></p>
</li>
</ul>
</li>
</ul>
<h3 id="234_fernet_key_rotation">2.3.4 :Fernet Key Rotation<a class="headerlink" href="#234_fernet_key_rotation" title="Permanent link">&para;</a></h3>
<ul>
<li>Bước đầu chưa có key repo sẽ khởi tạo một key repo bằng <code>keystone-manager</code> để tạo 2 khóa trong repo. Khi 2 file được tạo thì sẽ có file tên 1 sẽ là primary key , và file 0 sẽ là staged key và không có một secondary key</li>
<li>Xem đây là lần đầu xoay vòng , hiện tại đã có 2 file 0, 1 nên index tiếp theo sẽ là 2 . Fernet repo thực hiện , staged key ( 0 ) sẽ trở thành primary key với tên file 2 . và primary key (1 ) sẽ trờ thành secondary file. và thêm mới một strage với tên file là 0</li>
<li>Trong lần xoay tiếp theo, index lớn nhất sẽ là 3 , staged key ( 0 ) sẽ trở thành primary key với file 3 ,  primary key ( 2 ) sẽ trở thành secondary ( 2 ) </li>
</ul>
<h3 id="235token_generation_workflow">2.3.5.Token Generation Workflow<a class="headerlink" href="#235token_generation_workflow" title="Permanent link">&para;</a></h3>
<p><a href="https://camo.githubusercontent.com/832a7ee3b895c3ab77254cd8a525af8fd13e6e17/687474703a2f2f696d6775722e636f6d2f535273394c414c2e706e67"><img alt="" src="https://camo.githubusercontent.com/832a7ee3b895c3ab77254cd8a525af8fd13e6e17/687474703a2f2f696d6775722e636f6d2f535273394c414c2e706e67" /></a></p>
<h3 id="236token_validation_workflow">2.3.6.Token Validation Workflow<a class="headerlink" href="#236token_validation_workflow" title="Permanent link">&para;</a></h3>
<p><a href="https://camo.githubusercontent.com/b8884cd51610b49b38647194da76097f4d17593f/687474703a2f2f696d6775722e636f6d2f6d3273435835702e706e67"><img alt="" src="https://camo.githubusercontent.com/b8884cd51610b49b38647194da76097f4d17593f/687474703a2f2f696d6775722e636f6d2f6d3273435835702e706e67" /></a></p>
<ul>
<li>Gửi yêu cầu xác thực token với phương thức: GET v3/auth/tokens  </li>
<li>Khôi phục lại padding, trả lại token với padding chính xác  </li>
<li>Decrypt sử dụng Fernet Keys để thu lại token payload  </li>
<li>Xác định phiên bản của token payload. (Unscoped token: 1, token trong tầm vực domain: 1, token trong tầm vực project: 2 )  </li>
<li>Tách các trường của payload để chứng thực. Ví dụ với token trong tầm vực project gồm các trường sau: user id, project id, method, expiry, audit id  </li>
<li>Kiểm tra xem token đã hết hạn chưa. Nếu thời điểm hiện tại lớn hơn so với thời điểm hết hạn thì trả về thông báo "Token not found". Nếu token chưa hết hạn thì chuyển sang bước tiếp theo  </li>
<li>Kiểm tra xem token đã bị thu hồi chưa. Nếu token đã bị thu hồi (tương ứng với 1 sự kiện thu hồi trong bảng revocation_event của database keystone) thì trả về thông báo "Token not found". Nếu chưa bị thu hồi thì trả lại token (thông điệp phản hồi thành công HTTP/1.1 200 OK )</li>
</ul>
<h2 id="3_tham_khao_them">3. Tham khảo thêm<a class="headerlink" href="#3_tham_khao_them" title="Permanent link">&para;</a></h2>
<p>[1] : https://developer.ibm.com/opentech/2015/11/11/deep-dive-keystone-fernet-tokens/</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../6. Keystone-CURL/" title="1. Application Credentials" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                1. Application Credentials
              </span>
            </div>
          </a>
        
        
          <a href="../../Neutron/1. Introduction-neutron/" title="Openstack networking - Neutron" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Openstack networking - Neutron
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            nguyenhungsync
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.9e1f3b71.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>